CoulombVertexReader [
  (file "../../resources/CoulombVertex.bin")
] [
  CoulombVertex HoleEigenEnergies ParticleEigenEnergies
].

CoulombIntegralsFromVertex [
  CoulombVertex HoleEigenEnergies ParticleEigenEnergies
] [
  PPPPCoulombIntegrals
  PPPHCoulombIntegrals
  PHPHCoulombIntegrals
  PPHHCoulombIntegrals
  HHHHCoulombIntegrals
  HHHPCoulombIntegrals
].

CcsdEnergyFromCoulombIntegrals [
  CoulombVertex
  PPPPCoulombIntegrals
  PPPHCoulombIntegrals
  PHPHCoulombIntegrals
  PPHHCoulombIntegrals
  HHHHCoulombIntegrals
  HHHPCoulombIntegrals
  ParticleEigenEnergies HoleEigenEnergies
  (maxIterations 24)
] [
  (CcsdEnergy CcsdEnergy) 
  (CcsdSinglesAmplitudes SinglesAmplitudes)
  (CcsdDoublesAmplitudes DoublesAmplitudes)
].

TensorWriter [(Data CcsdEnergy)] [].

SliceCoulombVertex [
  CoulombVertex HoleEigenEnergies ParticleEigenEnergies
] [
  ParticleHoleCoulombVertex
].

TensorReader [] [(Data CoulombKernel)].
TensorReader [] [(Data Momenta)].

FiniteSizeCorrection [
  ParticleHoleCoulombVertex
  CoulombKernel
  DoublesAmplitudes
  SinglesAmplitudes
  Momenta
% Set the number of kpoints, the volume of the simulation cell, and the
% constantFactor
  (kpoints 1)
  (volume 136.99)
  (constantFactor 0.002351)
% Set the shortest G-vector (if given), else the smallest G-vector will be
% used
  (shortestGvector 0.02351)
] [
  CorrectedEnergy
  StructureFactor
].
